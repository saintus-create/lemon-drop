<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rooftop Citrus Garden Guide</title>

  <!-- Tailwind CDN (includes JIT, so we can use arbitrary values) -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>

  <!-- Lucide icons -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/latest/umd/lucide.min.js"></script>

  <!-- Custom Tailwind config â€“ adds the â€œcitrusâ€ palette -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            citrus: {
              50: "#fff7e6",
              100: "#ffebc2",
              200: "#ffd68a",
              300: "#ffbc4a",
              400: "#ffa726",
              500: "#ff9800",   /* primary */
              600: "#fb8c00",
              700: "#f57c00",
              800: "#ef6c00",
              900: "#e65100",
            },
            lime: {
              500: "#cddc39",
            },
            amber: {
              500: "#ffb300",
            },
          },
          boxShadow: {
            "glow": "0 0 15px rgba(255,152,0,0.4), 0 0 30px rgba(255,152,0,0.2)",
          },
          backdropBlur: {
            xs: "2px",
          },
        },
      },
    };
  </script>

  <style>
    /* Aceternityâ€‘style glass cards */
    .glass {
      @apply bg-white/10 backdrop-blur-xs border border-white/20 rounded-xl;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    }

    /* shadcnâ€‘style button */
    .btn-primary {
      @apply inline-flex items-center justify-center rounded-lg px-5 py-2.5 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-citrus-500 focus-visible:ring-offset-2 bg-citrus-500 text-white hover:bg-citrus-600 shadow-glow;
    }

    /* Lucide icons â€“ keep them same size */
    [data-lucide] {
      display: inline-block;
      width: 1.5rem;
      height: 1.5rem;
      stroke-width: 2;
    }
  </style>
</head>

<body class="bg-gradient-to-b from-citrus-50 to-citrus-100 min-h-screen font-sans text-slate-800">

  <div id="app"></div>

  <script>
    /* ------------------------------------------------------------------
       Data â€“ unchanged from your original version (just renamed a few keys)
       ------------------------------------------------------------------ */
    const { ChevronDown, Leaf, Droplet, Sun, Package, AlertCircle, CheckCircle2 } = lucide;

    let expandedSection = "soil";

    const sections = {
      soil: {
        title: "Soil Media Design",
        icon: "package",
        content: [
          { ingredient: "Coarse pine bark (2â€‘3 in.)", percent: "40%", product: "SungroÂ® Professional Pine Bark", why: "Low bulk density & large macropores for drainage" },
          { ingredient: "Washed river sand", percent: "30%", product: "SungroÂ® Professional Sand â€“ Fine", why: "Adds weight & keeps EC < 0.2 dSâ€¯mâ»Â¹" },
          { ingredient: "Peat moss or coconut coir", percent: "25%", product: "Coirâ€‘Liteâ„¢ Coconut Coir", why: "High water retention & maintains pH â‰ˆâ€¯5.5" },
          { ingredient: "Perlite (3â€‘5 mm)", percent: "5%", product: "Miracleâ€‘Gro Perlite", why: "Boosts airâ€‘filled porosity" },
        ],
      },

      water: {
        title: "Water Management",
        icon: "droplet",
        content:
          "Precise irrigation with pressureâ€‘compensating emitters at 0.5â€¯gph. Use ECâ€‘5 moisture sensors to trigger drip irrigation when soil moisture drops below target VWC. Flush weekly with 2â€¯L rainâ€‘water to maintain EC <â€¯1.2â€¯dSâ€¯mâ»Â¹.",
      },

      environment: {
        title: "Environmental Mitigation",
        icon: "sun",
        content: [
          { item: "Shade cloth (30â€¯% density)", benefit: "Reduces leaf temp ~5â€¯Â°C, passes 70â€¯% PAR" },
          { item: "Lattice windbreak", benefit: "Blocks ~40â€¯% wind exposure" },
          { item: "Coolâ€‘roof coating (0.65+ albedo)", benefit: "Lowers roof surface temp 10â€‘12â€¯Â°C" },
          { item: "Coconutâ€‘coir mulch (1â€‘2â€¯in.)", benefit: "Cuts surface evaporation ~30â€¯%" },
        ],
      },

      nutrients: {
        title: "Nutrient Management",
        icon: "leaf",
        content:
          "OsmocoteÂ® Smartâ€‘Release 14â€‘14â€‘14 (Â½â€¯cup per 5â€‘gal pot) releases NPK at 2â€‘4â€¯% monthly. Supplement biâ€‘weekly with Jackâ€™s Classic 2â€‘4â€‘6 liquid (30â€¯mL per application) during fruit set. Add MycoApplyâ„¢ mycorrhizal inoculum (5â€¯g per pot) to enhance root surface area 2â€‘3Ã—.",
      },

      citrus: {
        title: "Orange & Other Citrus",
        icon: "sun",
        content: [
          { item: "Varieties â€“ â€˜Washington Navelâ€™, â€˜Meyerâ€™, â€˜Kumquatâ€™", benefit: "Coldâ€‘hardier, compact growth habit, high vitaminâ€¯C" },
          { item: "Pollination â€“ selfâ€‘fertile, but a second tree boosts yield", benefit: "10â€‘15â€¯% more fruit per season" },
          { item: "Fruitâ€‘set timing â€“ protect blossoms from wind with a 40â€¯% shade net", benefit: "Reduces drop & improves size" },
          { item: "Harvest â€“ pick when fruit is fully orange, skin slightly soft to touch", benefit: "Peak flavor & sugar content" },
        ],
      },
    };

    const checklist = [
      {
        category: "Media Components",
        items: ["Coarse pine bark (2â€¯L)", "Washed river sand (1.5â€¯L)", "Peat moss/coir (1.2â€¯L)", "Perlite (0.15â€¯L)", "Dolomitic lime (0.25â€¯lb)"],
      },
      {
        category: "Containers & Drainage",
        items: ["Smart PotÂ® 5â€‘gal fabric bag", "Pumice stone (drain layer)", "Geotextile liner", "Anchoring hardware"],
      },
      {
        category: "Irrigation System",
        items: ["DripWorks Â½â€‘in. tubing (20â€¯ft)", "Rainâ€‘Bird PC Â½â€¯gph emitters (2)", "ECâ€‘5 moisture sensor", "Titan 12â€‘V timer + power supply", "5â€‘gal gravity reservoir"],
      },
      {
        category: "Nutrients & Inoculants",
        items: ["Osmocote 14â€‘14â€‘14 (Â½â€¯cup)", "Jackâ€™s Classic 2â€‘4â€‘6 liquid", "MycoApply mycorrhizal inoculum (5â€¯g)", "Dolomitic lime (0.25â€¯lb)"],
      },
      {
        category: "Environmental Protection",
        items: ["Coolâ€‘Shade 30â€¯% shade cloth", "Garden Edge vinyl lattice (2Ã—2â€¯ft)", "CocoCoir mulch (1â€‘2â€¯in. layer)", "Coolâ€‘Roof reflective coating (optional)"],
      },
    ];

    const retailers = [
      { name: "Home Depot", icon: "ðŸª" },
      { name: "Loweâ€™s", icon: "ðŸª" },
      { name: "Amazon", icon: "ðŸ“¦" },
      { name: "DripWorks", icon: "ðŸ’§" },
      { name: "Millerâ€™s Nurseries (Santa Maria)", icon: "ðŸŒ±" },
      { name: "Green Acres Nursery", icon: "ðŸŒ±" },
    ];

    const troubleshooting = [
      {
        problem: "Leaf yellowing + black roots",
        solution: "Add 5â€‘10â€¯% extra perlite to media; improve drainage",
        fix: "Home Depot perlite bags",
      },
      {
        problem: "Sunâ€‘scorch on south side",
        solution: "Increase shade cloth overlap to 40â€¯% total",
        fix: "Additional Coolâ€‘Shade cloth roll",
      },
      {
        problem: "Fruit drop after hot night",
        solution: "Apply 30â€¯mL Jackâ€™s 2â€‘4â€‘6 weekly as foliar spray",
        fix: "Boost leaf K >â€¯0.8â€¯% DW",
      },
      {
        problem: "Mildew under canopy",
        solution: "Increase pot spacing; add lattice for airflow",
        fix: "Garden Edge lattice panels",
      },
      {
        problem: "pH drift upward in winter",
        solution: "Add 0.1â€¯lb elemental sulfur per 5â€‘gal pot",
        fix: "5â€‘lb sulfur bag from Home Depot",
      },
    ];

    /* ------------------------------------------------------------------
       Helper render functions â€“ now using the â€œglassâ€ class and shadcn
       ------------------------------------------------------------------ */
    function toggleSection(key) {
      expandedSection = expandedSection === key ? null : key;
      render();
    }

    function renderIngredientContent(content) {
      return content
        .map(
          (item) => `
        <div class="glass p-4">
          <div class="flex justify-between items-start mb-2">
            <span class="font-semibold text-slate-900">${item.ingredient}</span>
            <span class="bg-citrus-100 text-citrus-700 text-sm font-medium px-2 py-1 rounded">${item.percent}</span>
          </div>
          <p class="text-sm text-slate-700 mb-1"><strong>${item.product}</strong></p>
          <p class="text-sm text-slate-600">${item.why}</p>
        </div>`
        )
        .join("");
    }

    function renderEnvironmentContent(content) {
      return content
        .map(
          (item) => `
        <div class="glass p-4">
          <h4 class="font-semibold text-slate-900 mb-1">${item.item}</h4>
          <p class="text-sm text-slate-600">${item.benefit}</p>
        </div>`
        )
        .join("");
    }

    function renderSections() {
      return Object.entries(sections)
        .map(([key, section]) => {
          const isExpanded = expandedSection === key;
          const icon = section.icon;

          let innerHtml = "";
          if (Array.isArray(section.content)) {
            if (key === "soil") innerHtml = renderIngredientContent(section.content);
            else innerHtml = renderEnvironmentContent(section.content);
          } else {
            innerHtml = `<p class="text-slate-700 leading-relaxed">${section.content}</p>`;
          }

          return `
          <div class="glass overflow-hidden transition-shadow hover:shadow-xl">
            <button onclick="toggleSection('${key}')" class="w-full p-6 flex items-center justify
