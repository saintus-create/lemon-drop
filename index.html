<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rooftop Citrus Growing Guide - Aceternity Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/latest/umd/lucide.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/geist/dist/fonts/geist-sans/style.css" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Geist Sans', 'sans-serif'],
                    },
                    colors: {
                        // Aceternity-inspired dark palette
                        'acet-bg': '#0f0f0f', // Very dark background
                        'acet-card': '#1a1a1a', // Slightly lighter card background
                        'acet-border': '#333333', // Subtle border color
                        'acet-text': '#e0e0e0', // Light text for dark background
                        'acet-text-light': '#a0a0a0', // Lighter descriptive text
                        
                        // Citrus accents
                        'citrus-orange': '#fb923c', // Warm orange for accents
                        'citrus-green': '#a7f3d0',  // Pale lime green for highlights
                        'citrus-yellow': '#fde047', // Bright yellow for subtle glow
                    }
                },
            },
        }
    </script>
    <style>
        /* Base Aceternity-inspired styles */
        body {
            background-color: var(--acet-bg);
            color: var(--acet-text);
            transition: background-color 0.3s, color 0.3s;
            overflow-x: hidden; /* Prevent horizontal scroll from animations */
        }

        /* Aceternity-like glowing border effect */
        .acet-border-glow {
            position: relative;
            border: 1px solid transparent; /* Start transparent */
            background-clip: padding-box;
            background-origin: border-box;
            background-image: linear-gradient(to bottom right, var(--acet-card), var(--acet-card)); /* Inner fill */
        }

        .acet-border-glow::before {
            content: '';
            position: absolute;
            inset: 0;
            z-index: -1;
            margin: -1px; /* Extend gradient beyond actual border */
            border-radius: inherit; /* Inherit border-radius from parent */
            background: linear-gradient(
                135deg,
                var(--citrus-orange) 0%,
                var(--citrus-yellow) 20%,
                transparent 50%,
                var(--citrus-green) 80%,
                var(--citrus-orange) 100%
            );
            opacity: 0;
            filter: blur(1px); /* Subtle blur for glow */
            transition: opacity 0.3s ease;
        }

        .acet-border-glow:hover::before {
            opacity: 0.7; /* Show glow on hover */
        }

        /* Specific Aceternity-inspired elements */
        .hero-header {
            background: radial-gradient(circle at top left, rgba(251, 146, 60, 0.1) 0%, transparent 40%),
                        radial-gradient(circle at bottom right, rgba(167, 243, 208, 0.08) 0%, transparent 40%),
                        var(--acet-bg);
            padding: 8rem 0 10rem 0; /* More space for dramatic effect */
            position: relative;
            overflow: hidden;
        }

        .hero-header::after {
            content: '';
            position: absolute;
            inset: 0;
            background: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="%231a1a1a" fill-opacity="0.4"%3E%3Cpath d="M12 28H8v4h4v-4zm-4 8h4v4H8v-4zM12 12H8v4h4v-4zm-4 8h4v4H8v-4z"/%3E%3C/g%3E%3C/svg%3E'); /* Subtle Aceternity grid pattern */
            opacity: 0.3;
            z-index: 0;
        }

        .hero-header > div { /* Target direct child div for content */
            position: relative;
            z-index: 1;
        }

        .gradient-text {
            background: linear-gradient(90deg, var(--citrus-orange) 0%, var(--citrus-yellow) 50%, var(--citrus-green) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
            text-shadow: 0 0 8px rgba(251, 146, 60, 0.4), 0 0 15px rgba(253, 224, 71, 0.3); /* Subtle glow */
        }

        /* Card styles */
        .acet-card {
            background-color: var(--acet-card);
            border: 1px solid var(--acet-border);
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* Subtle shadow */
            transition: all 0.3s ease;
        }

        .acet-card:hover {
            border-color: rgba(251, 146, 60, 0.4); /* Citrus highlight on hover */
            box-shadow: 0 0 15px rgba(251, 146, 60, 0.2), 0 0 25px rgba(253, 224, 71, 0.1);
            transform: translateY(-2px);
        }

        .acet-card-small-glow {
            position: relative;
            overflow: hidden;
            background: var(--acet-card);
            border: 1px solid var(--acet-border);
        }

        .acet-card-small-glow::before {
            content: '';
            position: absolute;
            inset: 0;
            margin: -1px;
            border-radius: inherit;
            background: conic-gradient(from var(--angle),
                        transparent 0deg, transparent 90deg,
                        var(--citrus-orange) 95deg, var(--citrus-green) 100deg,
                        transparent 110deg);
            animation: rotate-border 4s linear infinite;
            opacity: 0.1; /* Very subtle glow */
            filter: blur(2px);
            z-index: 0;
        }
        .acet-card-small-glow:hover::before {
            opacity: 0.3; /* More visible on hover */
        }
        .acet-card-small-glow > div {
            position: relative;
            z-index: 1;
        }

        @property --angle {
            syntax: "<angle>";
            inherits: false;
            initial-value: 0deg;
        }

        @keyframes rotate-border {
            from { --angle: 0deg; }
            to { --angle: 360deg; }
        }

        /* Specific overrides for text and icons on dark bg */
        .text-gray-800, .text-gray-900 { color: var(--acet-text); }
        .text-gray-600, .text-gray-700 { color: var(--acet-text-light); }

        /* Buttons */
        .acet-btn {
            background: linear-gradient(90deg, var(--citrus-orange) 0%, var(--citrus-yellow) 100%);
            color: var(--acet-bg); /* Dark text on bright button */
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .acet-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300%;
            height: 300%;
            background: rgba(255, 255, 255, 0.15);
            transition: all 0.75s ease-out;
            border-radius: 50%;
            transform: translate(-50%, -50%) scale(0);
            z-index: 0;
        }
        .acet-btn:hover::before {
            transform: translate(-50%, -50%) scale(1);
            opacity: 0;
        }
        .acet-btn:hover {
            box-shadow: 0 0 20px rgba(251, 146, 60, 0.4);
            transform: translateY(-1px);
        }
        .acet-btn > * { position: relative; z-index: 1; } /* Ensure text/icons are above pseudo-element */


        /* Modal styles */
        #modal-box {
            background-color: var(--acet-card);
            border: 1px solid var(--acet-border);
            color: var(--acet-text);
        }
        #modal-title {
            color: var(--acet-text);
        }
        #modal-close-btn {
            color: var(--acet-text-light);
        }
        #modal-close-btn:hover {
            color: var(--citrus-orange);
        }

        /* Form elements within modal */
        #problem-textarea {
            background-color: #2a2a2a;
            border-color: var(--acet-border);
            color: var(--acet-text);
        }
        #problem-textarea:focus {
            border-color: var(--citrus-orange);
            box-shadow: 0 0 0 2px rgba(251, 146, 60, 0.2);
        }

        /* Scroll to top button */
        .scroll-to-top {
            background-color: var(--acet-card);
            border: 1px solid var(--acet-border);
            color: var(--citrus-orange);
        }
        .scroll-to-top:hover {
            background-color: #2a2a2a;
            color: var(--citrus-yellow);
        }
        
        /* Specific section styling */
        .image-section {
            background-color: var(--acet-card);
            border: 1px solid var(--acet-border);
        }
        .image-section img {
            border: 1px solid var(--acet-border);
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .image-section img:hover {
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(251, 146, 60, 0.3);
        }
        .image-section figcaption {
            background-color: rgba(0,0,0,0.3);
            color: var(--acet-text-light);
        }

        /* Accordion button */
        .accordion-button {
            background-color: var(--acet-card);
            border-bottom: 1px solid var(--acet-border);
        }
        .accordion-button:hover {
            background-color: #222;
        }
        .accordion-button svg {
            color: var(--citrus-green);
        }
        .accordion-button h3 {
            color: var(--acet-text);
        }
        .accordion-button > div:first-child > div {
            background-color: rgba(251, 146, 60, 0.1);
            border: 1px solid rgba(251, 146, 60, 0.3);
        }
        .accordion-button > div:first-child > div svg {
            color: var(--citrus-orange);
        }


        .content-panel .py-6 {
            border-top: 1px solid var(--acet-border);
        }
        .content-panel .bg-gray-50 {
            background-color: #222;
            border-color: #333;
            color: var(--acet-text);
        }
        .content-panel .bg-gray-50 .font-semibold {
             color: var(--citrus-yellow); /* Highlight key info */
             text-shadow: 0 0 3px rgba(253, 224, 71, 0.2);
        }
        .content-panel .bg-gray-50 .text-gray-700,
        .content-panel .bg-gray-50 .text-gray-600 {
            color: var(--acet-text-light);
        }
        .content-panel .bg-green-100 { background-color: rgba(167, 243, 208, 0.2); color: var(--citrus-green); }
        .content-panel .bg-blue-100 { background-color: rgba(59, 130, 246, 0.2); color: #60a5fa; }
        .content-panel .bg-yellow-100 { background-color: rgba(253, 224, 71, 0.2); color: var(--citrus-yellow); }
        .content-panel .bg-purple-100 { background-color: rgba(192, 132, 252, 0.2); color: #c084fc; }
        .content-panel .bg-red-100 { background-color: rgba(239, 68, 68, 0.2); color: #ef4444; }


        .checklist-group .checklist-item {
            color: var(--acet-text-light);
            transition: color 0.2s ease;
        }
        .checklist-group .checklist-item:hover {
            color: var(--acet-text);
        }
        .checklist-group .checklist-item.checked {
            color: var(--acet-text-light);
            text-decoration-color: var(--citrus-green);
        }
        .checklist-group .checklist-item .icon-check {
            color: var(--acet-border);
            transition: color 0.2s ease;
        }
        .checklist-group .checklist-item:hover .icon-check {
            color: var(--citrus-orange);
        }
        .checklist-group .checklist-item .icon-check-circle {
            color: var(--citrus-green);
            filter: drop-shadow(0 0 3px rgba(167, 243, 208, 0.5));
        }

        /* Info boxes */
        .bg-orange-50 { background-color: rgba(251, 146, 60, 0.1); border-color: rgba(251, 146, 60, 0.3); }
        .text-orange-900 { color: var(--citrus-orange); }
        .text-orange-800 { color: var(--citrus-yellow); }
        .bg-blue-50 { background-color: rgba(59, 130, 246, 0.1); border-color: rgba(59, 130, 246, 0.3); }
        .text-blue-900 { color: #60a5fa; }
        .text-blue-800 { color: #93c5fd; }
        .bg-primary-citrus\/10 { background-color: rgba(251, 146, 60, 0.1); }
        .border-primary-citrus\/30 { border-color: rgba(251, 146, 60, 0.3); }
        .text-primary-citrus { color: var(--citrus-orange); }
        .bg-secondary-citrus\/10 { background-color: rgba(253, 224, 71, 0.1); }
        .border-secondary-citrus\/30 { border-color: rgba(253, 224, 71, 0.3); }


        .footer {
            background-color: var(--acet-card);
            border-top: 1px solid var(--acet-border);
            color: var(--acet-text-light);
        }

        /* Select dropdown */
        #tree-select {
            background-color: var(--acet-card);
            border: 1px solid var(--acet-border);
            color: var(--acet-text);
            padding-right: 2.5rem; /* Space for chevron */
            transition: all 0.2s ease;
        }
        #tree-select:hover {
            border-color: var(--citrus-orange);
            box-shadow: 0 0 8px rgba(251, 146, 60, 0.2);
        }
        #tree-select option {
            background-color: var(--acet-card);
            color: var(--acet-text);
        }
        .pointer-events-none {
            color: var(--acet-text-light);
        }
    </style>
</head>
<body class="font-sans leading-normal">
    <div id="app">
        <header class="bg-acet-card/90 backdrop-blur-sm sticky top-0 z-20 border-b border-acet-border shadow-lg">
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
                <a href="#" class="text-2xl font-bold text-acet-text flex items-center gap-2">
                    <svg class="w-6 h-6" style="color: var(--citrus-green);" data-lucide="citrus"></svg>
                    Citrus Guide
                </a>
                
                <div class="relative inline-block text-left">
                    <label for="tree-select" class="sr-only">Select Your Tree</label>
                    <select id="tree-select" class="appearance-none acet-card text-acet-text font-semibold py-2 pl-4 pr-10 rounded-lg shadow-md hover:border-citrus-orange transition-colors focus:outline-none focus:ring-2 focus:ring-citrus-orange cursor-pointer">
                        <option value="lemon">üçã Lemon Tree (Eureka/Meyer)</option>
                        <option value="orange">üçä Orange Tree (Valencia/Navel)</option>
                        <option value="general">üå≥ General Citrus</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-acet-text-light">
                        <svg class="w-4 h-4" data-lucide="chevron-down"></svg>
                    </div>
                </div>
            </div>
        </header>

        <main>
            <section class="hero-header text-center">
                <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="mb-6">
                        <h1 id="hero-title" class="text-5xl md:text-6xl font-extrabold gradient-text">Ready to Grow Your Citrus?</h1>
                    </div>
                    <p id="hero-subtitle" class="text-lg text-acet-text-light mb-12 max-w-3xl mx-auto">
                        This guide has everything you need to grow a thriving **Lemon Tree** on your rooftop.
                    </p>
                    <div id="hero-cards" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        </div>
                </div>
            </section>
            
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 -mt-24 relative z-10">

                <section class="mb-16 image-section acet-card rounded-2xl shadow-xl p-8 acet-border-glow">
                    <div class="max-w-5xl mx-auto">
                        <h3 class="text-3xl font-bold text-acet-text mb-4 text-center gradient-text">Harvest Potential</h3>
                        <p class="text-center text-acet-text-light mb-10 max-w-2xl mx-auto">
                            See what a successful rooftop citrus harvest looks like!
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <figure class="acet-card rounded-xl shadow-lg overflow-hidden acet-border-glow">
                                <img src="https://image.cdn2.seaart.me/2025-11-12/d4afbite878c73as2d6g/b43a49bd216e812b29a94c58bb114dbd.webp" alt="Woman holding lemonade on a sunny beach" class="w-full h-auto object-cover" loading="lazy">
                                <figcaption class="p-4 text-sm text-acet-text-light text-center bg-black/40">Fresh Lemonade.</figcaption>
                            </figure>
                            <figure class="acet-card rounded-xl shadow-lg overflow-hidden acet-border-glow">
                                <img src="https://image.cdn2.seaart.me/2025-11-12/d4afcsde878c738s8etg/58194980cbde8c7575534cf55932f761.webp" alt="Woman holding two large lemons" class="w-full h-auto object-cover" loading="lazy">
                                <figcaption class="p-4 text-sm text-acet-text-light text-center bg-black/40">Successful Yield.</figcaption>
                            </figure>
                        </div>
                    </div>
                </section>
                
                <section class="mb-16">
                    <h2 class="text-3xl font-bold text-acet-text mb-8 text-center gradient-text">Core Growing Systems</h2>
                    <div id="sections-container" class="space-y-4">
                        </div>
                </section>

                <section class="mb-16 acet-card rounded-2xl shadow-xl p-8 acet-border-glow" id="checklist">
                    <h2 class="text-3xl font-bold text-acet-text mb-6 gradient-text">Shopping Checklist</h2>
                    <div id="checklist-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        </div>
                    <div class="mt-6 bg-orange-50 acet-card-small-glow rounded-lg p-6 flex gap-4 items-start">
                        <svg class="w-6 h-6 text-citrus-orange flex-shrink-0 mt-0.5" data-lucide="info"></svg>
                        <div>
                            <p class="text-md font-semibold text-citrus-orange mb-1">Estimated Cost</p>
                            <p class="text-md text-citrus-yellow leading-normal">$120-$150 per 5-gallon setup (media + container + irrigation + nutrients, excluding optional cool-roof coating)</p>
                        </div>
                    </div>
                </section>

                <section class="mb-16">
                    <h2 class="text-3xl font-bold text-acet-text mb-8 text-center gradient-text">Where to Buy</h2>
                    <div id="retailers-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                        </div>
                </section>

                <section class="mb-16 acet-card rounded-2xl shadow-xl p-8 acet-border-glow">
                    <h2 class="text-3xl font-bold text-acet-text mb-6 gradient-text">Common Issues & Fixes</h2>
                    <div id="troubleshooting-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        </div>
                </section>

                <section class="bg-gradient-to-br from-orange-800 to-red-900 rounded-2xl p-10 text-white text-center mb-12 shadow-2xl acet-card-small-glow">
                    <h2 class="text-4xl font-extrabold mb-4 text-acet-text">Start Your Citrus Orchard</h2>
                    <p class="mb-8 text-acet-text-light max-w-2xl mx-auto">All products are available in the Central Coast market. Use our interactive checklist and start your rooftop orchard today.</p>
                    <button id="print-button" class="acet-btn px-8 py-4 rounded-lg shadow-lg">
                        Print or Save Guide
                    </button>
                </section>
            </div>
        </main>

        <footer class="footer py-10 mt-16">
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-acet-text-light text-sm">
                <p>Made By Me</p>
            </div>
        </footer>

        <button id="scroll-to-top-btn" class="scroll-to-top acet-card rounded-full p-3 shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-citrus-orange transition-all" title="Go to top">
            <svg class="w-6 h-6" data-lucide="arrow-up"></svg>
        </button>

        <div id="modal-overlay" class="fixed inset-0 bg-black/70 z-50 hidden flex items-center justify-center p-4" aria-labelledby="modal-title" role="dialog" aria-modal="true">
            <div id="modal-box" class="acet-card rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col acet-border-glow">
                <div class="flex justify-between items-center p-4 border-b border-acet-border sticky top-0 bg-acet-card z-10">
                    <h3 id="modal-title" class="text-lg font-semibold text-acet-text">‚ú® AI-Generated Suggestions</h3>
                    <button id="modal-close-btn" class="text-acet-text-light hover:text-citrus-orange" aria-label="Close modal">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
                <div id="modal-content" class="p-6 text-acet-text-light overflow-y-auto">
                    </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA STRUCTURE (Updated to handle multiple citrus types) ---
            const citrusData = {
                lemon: {
                    title: "Ready to Get Juicing?",
                    subtitle: "This guide has everything you need to grow a thriving **Lemon Tree** on your rooftop.",
                    heroCards: [
                        { icon: 'scale', title: 'Load Optimization', text: 'Lightweight media targets <span class="font-semibold text-acet-text">‚â§ 20 lb/ft¬≤</span> roof load' },
                        { icon: 'droplets', title: 'Smart Irrigation', text: 'Sensor-driven drip system saves water & prevents over-watering with <span class="font-semibold text-acet-text">VWC monitoring</span>' },
                        { icon: 'thermometer-sun', title: 'Climate Control', text: 'Shade & windbreak reduce ET stress by <span class="font-semibold text-acet-text">20-30%</span>' },
                    ],
                    sections: {
                        soil: { 
                            title: 'Soil Media Design', icon: 'layers', color: 'amber', 
                            content: [
                                { ingredient: 'Coarse pine bark', percent: '40%', product: 'Sungro¬Æ Professional Pine Bark', why: 'Low bulk density, large macropores, and excellent drainage.' },
                                { ingredient: 'Washed river sand', percent: '30%', product: 'Sungro¬Æ Professional Sand ‚Äì Fine', why: 'Adds essential weight for stability and keeps EC low.' },
                                { ingredient: 'Peat moss or coconut coir', percent: '25%', product: 'Coir-Lite‚Ñ¢ Coconut Coir', why: 'High water retention capacity and maintains acidic pH ‚âà 5.5.' },
                                { ingredient: 'Perlite (3-5 mm)', percent: '5%', product: 'Miracle-Gro Perlite', why: 'Boosts air-filled porosity (AFP) which is vital for roots.' },
                            ]
                        },
                        water: { 
                            title: 'Water Management', icon: 'droplets', color: 'blue', 
                            content: [
                                { type: 'Emitter Flow', value: '0.5 gph', description: 'Use pressure-compensating emitters for consistent delivery.' },
                                { type: 'Sensor Trigger', value: 'VWC Target (35%)', description: 'Irrigate when Volumetric Water Content (VWC) drops below target.' },
                                { type: 'Target EC', value: '< 1.2
